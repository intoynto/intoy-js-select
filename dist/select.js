!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define("select",["react"],t):"object"==typeof exports?exports.select=t(require("react")):e.select=t(e.react)}(self,(function(e){return(()=>{"use strict";var t={543:function(e,t,n){function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var l=s(this).constructor;n=Reflect.construct(r,arguments,l)}else n=r.apply(this,arguments);return a(this,n)}}function a(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Select=void 0;var c=u(n(156)),p=n(282);function f(e){if(e){var t=new Event("click");e.dispatchEvent(t)}}function d(e,t){e&&e.classList.remove(t)}function v(e,t,n){e&&e.setAttribute(t,n)}function m(e,t){return e&&e.classList.contains(t)}function g(e){return c.default.createElement("svg",{className:e.className,height:"14",width:"14",viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false"},c.default.createElement("path",{className:e.className,d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(s,e);var t,n,r,a=i(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).options=[],t.valueRef=[],t.selectOptions=[],t.values=[],t.dropItems=[],t.places=[],t.ndWrap=null,t.ndSelBox=null,t.ndSelCtr=null,t.nDropDown=null,t.ndSelect=null,t.ndInput=null,t.ndNoInput=null,t.ndTgDrop=null,t.ndTgRem=null,t.search="",t.gInitState=function(e){return{focus:!1,emit:0}},t.isMultiple=function(e){return!!(e=e||t.props).multiple},t.isDisabled=function(e){return!!(e=e||t.props).disabled},t.prepValues=function(e){e=e||t.props;var n=(0,p.toArrayString)(null==e?void 0:e.value);!(0,p.isEqual)(n,t.values)&&(t.values=n.slice(0))},t.prepPlaces=function(e){if(t.places=[],t.values.length>0)for(var n=t.isMultiple(),r=0;r<t.values.length;r++){var l=t.valueRef.indexOf(t.values[r]),o=t.options[l];if(t.places.push(t.rdrPlace({dngH:o.__label_,multiple:n,dataValue:o.__id_})),!t.isMultiple(e))break}},t.valuesAdd=function(e){if(e){t.values.push(e);var n=t.valueRef.indexOf(e),r=t.options[n];t.places.push(t.rdrPlace({dngH:r.__label_,multiple:t.isMultiple(),dataValue:r.__id_}))}},t.rdrPlace=function(e){var t=e.dngH,n=e.multiple,r=e.dataValue;return c.default.createElement("div",{className:"SelectLabel SLRem","data-value":r},c.default.createElement("div",{className:"SelectLabelVal SLRem",dangerouslySetInnerHTML:{__html:t}}),n&&c.default.createElement("div",{className:"SelectLabelRem SLRem SLRemDo",role:"button"},c.default.createElement(g,{className:"SLRem SLRemDo"})))},t.valuesRem=function(e){if(e){var n=t.values.indexOf(e);return n>=0&&(t.values.splice(n,1),t.places.splice(n,1),!0)}var r=t.values[0];if(r){t.valueRef.indexOf(r);return t.values.splice(0,1),t.places.splice(0,1),!0}},t.itemsPush=function(e,n){e=e||{};var r=t.state.focus,l=(0,p.toStr)(t.search).trim().toLowerCase(),o=function(e){return e=(0,p.toStr)(e).toString().toLowerCase().trim(),new RegExp(l).test(e)},i=!0;if(r&&l.length>0&&(i=o(e.__id_)||o(e.__label_)),i){var a=t.values.indexOf(e.__id_),s=t.isMultiple(n)?a>=0:e.__id_===t.values[0],u={"data-value":e.__id_,className:"SelectItem ".concat(s?"selected disabled":"")};t.dropItems.push(c.default.createElement("li",Object.assign({onClick:t.onItemClick},u,{dangerouslySetInnerHTML:{__html:e.__label_}})))}},t.prepItems=function(){t.dropItems=[],t.options.forEach((function(e){t.itemsPush(e)}))},t.prepOptions=function(e){e=e||t.props,t.options=[],t.valueRef=[],t.selectOptions=[],t.dropItems=[];var n=t.isMultiple(e);if(Array.isArray(e.options)&&e.options.length>0){var r=(0,p.toStr)(e.fieldid).toString().trim(),l=(0,p.toStr)(e.fieldname).toString().trim();r=r.length<1?"id":r,l=l.length<1?r:l;for(var o=[],i=0,a=0;a<e.options.length;a++){var s=e.options[a];if(!(0,p.isObjectEmpty)(s)){var u=(0,p.toStr)(s[r]).toString().trim();if(!(o.indexOf(u)>=0)){var f=(0,p.toStr)(s[l]),d=f=f.length<1?u:f;if("function"==typeof e.onFieldName)try{var v=e.onFieldName(s);"string"==typeof v&&(0,p.toStr)(v).length>0&&(f=(0,p.toStr)(v).toString().trim())}catch(e){}o.push(u),t.valueRef.push(u);var m=Object.assign(Object.assign({},s),{__id_:u,__label_:f,__labelOrigin_:d});t.options.push(m);var g={value:m.__id_,selected:t.values.indexOf(m.__id_)>=0};i+=g.selected?1:0,!n&&i>0&&(g.selected=!1),t.selectOptions.push(c.default.createElement("option",Object.assign({},g),(0,p.stripHtmlTags)(m.__label_))),t.itemsPush(m,e)}}}}},t.ckInpFocused=function(){if(t.ndInput){var e,n=(0,p.getFocusElement)();n&&n!==t.ndInput&&(e=t.ndInput)&&e.focus&&"function"==typeof e.focus&&e.focus()}},t.emit=function(e){t.setState({emit:t.state.emit+1},e)},t.onECh=function(e){var n=e.target;t.search=n.value,t.prepItems(),t.emit()},t.hSWKeyDown=function(e){var n,r,l,o,i,a=(0,p.toStr)(e.key).toLowerCase().trim(),s=t.state.focus,u=function(){var e=t.nDropDown.querySelector(".focus");return(!e||e.length<1)&&(e=t.nDropDown.querySelector(".selected")),e};if("enter"===a)f(s?u():t.ndWrap);else if("backspace"===a){if(""===t.search&&t.values.length>0&&t.isMultiple()){var c=t.values[t.values.length-1];t.valuesRem(c)&&(t.updSelectValues(),t.prepItems(),t.emit(t.callPropsChange))}}else if("arrowdown"===a||"arrowup"===a){var v=u();if(d(v,"focus"),v="arrowdown"===a?function(e){for(e=e?e.nextElementSibling:t.nDropDown.querySelector(".SelectItems .SelectItem");e;){if(!m(e,"disabled")&&"none"!=e.style.display)return e;e=e.nextElementSibling}return null}(v):function(e){for(e=e?e.previousElementSibling:t.nDropDown.querySelector(".SelectItems .SelectItem");e;){if(!m(e,"disabled")&&"none"!=e.style.display)return e;e=e.previousElementSibling}return null}(v),v)d(t.ndTgDrop.querySelector(".focus"),"focus"),i="focus",(o=v)&&o.classList.add(i),n=t.nDropDown,r=v,l=n.scrollTop+n.offsetHeight,r.offsetTop+r.offsetHeight<l&&r.offsetTop>=n.scrollTop||(n.scrollTop=r.offsetTop);e.preventDefault()}else["esc","escape"].indexOf(a)>=0&&s?f(t.ndWrap):s||f(t.ndWrap);return!1},t.onItemClick=function(e){var n=e.target;if(!m(n,"disabled"))if(t.isMultiple()){var r=n.getAttribute("data-value")||"";t.values.indexOf(r)<=-1&&(t.valuesAdd(r),t.updSelectValues(),t.search="",t.prepItems(),t.emit(t.callPropsChange))}else{var l=n.getAttribute("data-value")||"";t.values.indexOf(l)<=-1&&(t.values=[],t.places=[],t.valuesAdd(l),t.updSelectValues(),t.search="",t.prepItems(),t.emit(t.callPropsChange))}},t.callPropsChange=function(){if(t.ndSelect){var e=t.isMultiple(),n=[];if(e)for(var r=0;r<t.values.length;r++){var l=t.values[r],o=t.valueRef.indexOf(l);n.push(Object.assign({},t.options[o]))}else{var i=t.values[0],a=t.valueRef.indexOf(i);n.push(Object.assign({},t.options[a]))}var s={target:{name:t.ndSelect.name,value:t.isMultiple()?t.values:t.values[0]}};s.target.data=e?n:n[0],s.currentTarget=Object.assign({},s.target),s.preventDefault=function(){},"function"==typeof t.props.onChange&&t.props.onChange(s)}},t.updSelectValues=function(){t.ndSelect&&(t.isMultiple()?t.values.forEach((function(e){"option[value='".concat(e,"']");v(t.ndSelect.querySelector("option[value='".concat(e,"']")),"selected","true")})):t.ndSelect.value=t.values[0])},t.hSWClick=function(e){var n;n=!t.state.focus;var r,l,o,i=t.ndTgRem&&t.ndTgRem.contains(e.target),a=(r=e.target,t.ndSelCtr&&t.ndSelCtr.contains(r)&&(m(r,"SLRem")||m(r,"SLRemDo"))),s=i||a;if(m(e.target,"SLRemDo")){var u=function e(t,n,r,l){return"body"===t.tagName.toString().toLowerCase()?null:m(t,n)?t:t.parentNode?(r++,l>0&&r>=l?null:e(t.parentNode,n,r,l)):null}(e.target,"SelectLabel",0,4),c=(o="data-value",(l=u)?l.getAttribute(o):null);u&&c&&t.valuesRem(c)&&(t.updSelectValues(),t.prepItems(),t.emit(t.callPropsChange))}s?e.preventDefault():t.setState({focus:!t.state.focus},n?t.ckInpFocused:void 0)},t.onClickOutside=function(e){var n=t.ndWrap&&t.ndWrap.contains(e.target),r=t.ndTgRem&&t.ndTgRem.contains(e.target),l=t.nDropDown&&t.nDropDown.contains(e.target);t.ndSelCtr&&t.ndSelCtr.contains(e.target);if(l);else if(r)return void(t.valuesRem()&&(t.updSelectValues(),t.prepItems(),t.emit(t.callPropsChange)));n||t.setState({focus:!1})},t.applySelect=function(){var e,n;t.ndSelect&&(t.isMultiple()?v(t.ndSelect,"multiple","multiple"):(e=t.ndSelect,n="multiple",e&&e.removeAttribute(n)))},t.updateCtrSize=function(){var e=t.ndWrap,n=t.ndSelBox;e&&n&&(t.isMultiple()?n.style.maxWidth="".concat(e.offsetWidth,"px"):n.style.maxWidth=null)},t.state=t.gInitState(e),t.prepValues(e),t.prepOptions(e),t.prepPlaces(e),t}return t=s,(n=[{key:"componentDidMount",value:function(){window.addEventListener("click",this.onClickOutside),window.addEventListener("resize",this.updateCtrSize),this.applySelect(),this.isMultiple()||this.updSelectValues()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("click",this.onClickOutside),window.removeEventListener("resize",this.updateCtrSize)}},{key:"componentDidUpdate",value:function(e){var t=(0,p.isEqual)(e.value,this.props.value),n=(0,p.isEqual)(e.multiple,this.props.multiple),r=(0,p.isEqual)(e.options,this.props.options),l=e.loading===this.props.loading;if(!(t&&n&&r&&l))return console.log("Emiter #1"),void(t&&n&&r?(console.log("Emiter #3"),this.forceUpdate()):(console.log("Emiter #2"),this.prepValues(),this.prepOptions(),this.prepPlaces(),this.emit()));this.updateCtrSize()}},{key:"render",value:function(){var e=this,t=this.state.focus,n=this.props,r=n.multiple,l=n.loading,o=this.props,i={};i.name=o.name,i.id=o.id?o.id:i.name;var a={className:"SelectInput"};return this.values.length<1&&!t&&(a.placeholder=o.placeholder?o.placeholder:"Pilihan",a.className=a.className+" withPlaceholder"),c.default.createElement("div",{className:"Select ".concat(r?"multiple":"single"," ").concat(t?"focus":"")},c.default.createElement("select",Object.assign({ref:function(t){return e.ndSelect=t}},i),this.selectOptions),c.default.createElement("div",{ref:function(t){return e.ndWrap=t},className:"SelectWrap",onClick:this.hSWClick,onKeyDown:this.hSWKeyDown},c.default.createElement("div",{ref:function(t){return e.ndSelBox=t},className:"SelectBox"},c.default.createElement("div",{ref:function(t){return e.ndSelCtr=t},className:"SelectControls"},this.places,c.default.createElement("input",Object.assign({ref:function(t){return e.ndInput=t},spellCheck:"false",onInput:this.onECh,value:this.search},a))),c.default.createElement("div",{className:"SelectArrows"},!r&&this.values.length>0&&c.default.createElement("span",{ref:function(t){return e.ndTgRem=t},className:"SelectArrow SelectArrowRemove"},c.default.createElement(g,null)),c.default.createElement("span",{ref:function(t){return e.ndTgDrop=t},className:"SelectArrow SelectArrowDropDown"}))),c.default.createElement("div",{className:"SelectDropBox"},c.default.createElement("div",{ref:function(t){return e.nDropDown=t},className:"SelectDropDown"},c.default.createElement("ul",{className:"SelectItems"},this.dropItems)))),l&&c.default.createElement("div",{className:"SelectLoading"}))}}])&&l(t.prototype,n),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),s}(c.default.Component);t.Select=h,h.version="1"},976:function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var l=Object.getOwnPropertyDescriptor(t,n);l&&!("get"in l?!t.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,l)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),l=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),l(n(543),t)},282:(e,t)=>{function n(e){var t="";e=e||"";for(var n=0;n<e.length;n++){e.charCodeAt(n)<=127&&(t+=e.charAt(n))}return t}function r(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null==e?"":(e="string"==typeof e||"number"==typeof e?e.toString():"",e=t?n(e):e.toString())}function l(e){return"string"==typeof e||"number"==typeof e?r(e).toString().trim():Array.isArray(e)&&e.length>0?l(e[0]):""}Object.defineProperty(t,"__esModule",{value:!0}),t.getFocusElement=t.stripHtmlTags=t.checkCompare=t.isObjectEmpty=t.isEqual=t.toArrayString=t.toSingleString=t.toStr=t.toUtf8String=void 0,t.toUtf8String=n,t.toStr=r,t.toSingleString=l,t.toArrayString=function(e){var t=[];if("string"==typeof e||"number"==typeof e){var n=r(e).toString().trim();n.length>0&&t.push(n)}else if(Array.isArray(e)&&e.length>0)for(var o=0;o<e.length;o++){var i=l(e[o]);i.length>0&&t.push(i)}return t},t.isEqual=function e(t,n){var r=Object.prototype.toString.call(t);if(r!==Object.prototype.toString.call(n))return!1;if(null===t&&null===n)return!0;if(void 0===t&&void 0===n)return!0;if(!0===t&&!0===n)return!0;if(!1===t&&!1===n)return!0;if("number"==typeof t&&"number"==typeof n&&t===n)return!0;if("string"==typeof t&&"string"==typeof n&&t===n)return!0;if(["[object Array]","[object Object]"].indexOf(r)<0)return!1;var l="[object Array]"===r?t.length:Object.keys(t).length;if(l!==("[object Array]"===r?n.length:Object.keys(n).length))return!1;var o=function(t,n){var r=Object.prototype.toString.call(t);if(["[object Array]","[object Object]"].indexOf(r)>=0){if(!e(t,n))return!1}else{if(r!==Object.prototype.toString.call(n))return!1;if("[object Function]"===r){if(t.toString()!==n.toString())return!1}else if(t!==n)return!1}};if("[object Array]"===r){for(var i=0;i<l;i++)if(!1===o(t[i],n[i]))return!1}else for(var a in t)if(t.hasOwnProperty(a)&&!1===o(t[a],n[a]))return!1;return!0},t.isObjectEmpty=function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},t.checkCompare=function(e,t){var n=(e||"").toString().toLowerCase(),r=(t||"").toString().toLowerCase();return n.indexOf(r)>-1},t.stripHtmlTags=function(e){return null==e||""===e?"":(e=e.toString()).replace(/<[^>]*>/g,"")},t.getFocusElement=function(){return document&&document.activeElement}},156:t=>{t.exports=e}},n={};var r=function e(r){var l=n[r];if(void 0!==l)return l.exports;var o=n[r]={exports:{}};return t[r].call(o.exports,o,o.exports,e),o.exports}(976);return r})()}));
//# sourceMappingURL=select.js.map